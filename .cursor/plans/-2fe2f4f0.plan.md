<!-- 2fe2f4f0-dc0f-448d-848a-f363c12fce1b c4faac0c-daed-49f1-80c1-88633f80bb4d -->
# 创建工具页和格式转换工具

## 1. 创建工具系统架构

### 1.1 创建工具类型定义

- **文件**: `src/types.ts`
- 添加工具接口定义：
  ```typescript
  export type ToolId = 'translation' | 'document-converter' | 'image-converter' | 'audio-converter' | 'video-converter' | 'video-to-audio' | string
  
  export interface Tool {
    id: ToolId
    name: string
    description: string
    icon: React.ComponentType<{ size?: number; weight?: string }>
    component: React.ComponentType<ToolProps>
    category?: '语言工具' | '文档工具' | '媒体工具'
  }
  
  export interface ToolProps {
    toolId: ToolId
  }
  ```


### 1.2 创建工具注册系统

- **文件**: `src/utils/tools.ts`
- 创建工具注册表和工具管理器：
  - `toolsRegistry`: 存储所有可用工具
  - `registerTool()`: 注册新工具的函数
  - `getToolsByCategory()`: 按分类获取工具
  - `getTool()`: 获取特定工具

## 2. 创建工具页主组件

### 2.1 创建 ToolsPage 组件

- **文件**: `src/components/ToolsPage.tsx`
- 功能：
  - 网格布局展示所有工具卡片
  - 点击工具卡片打开工具模态框
  - 支持工具搜索和按分类筛选
  - 使用 `ThemedCard` 作为容器
  - 响应式设计：移动端单列，桌面端多列（grid-cols-2 md:grid-cols-3）
  - 显示分类标签（语言工具、文档工具、媒体工具）

### 2.2 创建工具卡片组件

- **文件**: `src/components/ToolCard.tsx`
- 功能：
  - 显示工具图标、名称、描述、分类标签
  - 悬停效果和点击交互
  - 统一的卡片样式（遵循项目设计系统）

### 2.3 创建工具模态框组件

- **文件**: `src/components/ToolModal.tsx`
- 功能：
  - 全屏或大尺寸模态框
  - 关闭按钮和ESC键支持
  - 工具内容区域
  - 统一的样式和动画
  - 点击外部关闭功能

## 3. 实现客户端工具（不占用服务器资源）

### 3.2 文档格式转换器

- **文件**: `src/components/tools/DocumentConverterTool.tsx`
- **技术**: FileReader + pdf-lib + mammoth.js
- 支持格式：
  - PDF ↔ DOCX
  - TXT ↔ DOCX
  - Markdown ↔ HTML
- 功能：
  - 拖拽上传/点击选择
  - 格式选择下拉
  - 预览转换结果
  - 下载转换文件
  - 批量转换

### 3.3 图片格式转换器

- **文件**: `src/components/tools/ImageConverterTool.tsx`
- **技术**: Canvas API（纯客户端）
- 支持格式：
  - PNG ↔ JPEG ↔ WebP ↔ SVG ↔ BMP ↔ GIF
- 功能：
  - 拖拽上传/点击选择
  - 实时预览
  - 质量/压缩选项（JPEG/WebP）
  - 图片尺寸调整（可选）
  - 批量转换
  - 下载结果

### 3.4 音频格式转换器

- **文件**: `src/components/tools/AudioConverterTool.tsx`
- **技术**: Web Audio API + ffmpeg.wasm
- 支持格式：
  - MP3 ↔ WAV ↔ OGG ↔ AAC ↔ FLAC
- 功能：
  - 文件上传
  - 格式选择和质量设置
  - 实时预览播放
  - 转换进度显示
  - 下载结果

## 4. 实现服务器工具（会占用服务器资源）

### 4.1 视频格式转换器

- **文件**: `src/components/tools/VideoConverterTool.tsx`
- **技术**: 需要后端API（Supabase Edge Function 或 CloudConvert API）
- 支持格式：
  - MP4 ↔ AVI ↔ MOV ↔ WebM ↔ MKV
- 功能：
  - 文件上传到临时存储（Supabase Storage）
  - 格式和质量选择
  - 转换任务状态跟踪
  - 进度显示
  - 转换完成后下载
  - 文件大小限制提示（建议 < 500MB）

### 4.2 视频转音频转换器

- **文件**: `src/components/tools/VideoToAudioTool.tsx`
- **技术**: 需要后端API
- 支持输出：
  - MP3/WAV/OGG/AAC
- 功能：
  - 视频文件上传
  - 音频格式和质量选择
  - 提取进度显示
  - 下载音频文件
  - 文件大小限制提示

### 4.3 视频转换后端服务（可选）

- **方案A**: 使用 CloudConvert API
  - 配置 `VITE_CLOUDCONVERT_API_KEY` 环境变量
  - 文件上

### To-dos

- [ ] 在 types.ts 中添加工具相关的类型定义（ToolId, Tool, ToolProps）
- [ ] 创建 src/utils/tools.ts，实现工具注册系统和管理函数
- [ ] 创建 ToolCard.tsx 组件，用于展示工具卡片
- [ ] 创建 ToolModal.tsx 组件，用于展示工具内容
- [ ] 创建 ToolsPage.tsx 主组件，实现网格布局和工具展示
- [ ] 创建 src/services/translation.ts，实现 Google Translate API 封装
- [ ] 创建 TranslationTool.tsx 组件，实现多语言翻译比对功能
- [ ] 在 tools.ts 中注册翻译工具
- [ ] 在 App.tsx 中添加工具页标签和路由处理
- [ ] 配置环境变量支持 Google Translate API Key